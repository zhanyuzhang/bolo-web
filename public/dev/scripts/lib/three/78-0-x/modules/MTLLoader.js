define(["three@78-0-x"],function(t,a,r){"use strict";var e=t("three@78-0-x"),s=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager};return Object.assign(s.prototype,e.EventDispatcher.prototype,{load:function(t,a,r,s){var i=this,n=new e.XHRLoader(this.manager);n.setPath(this.path),n.load(t,function(t){a(i.parse(t))},r,s)},setPath:function(t){this.path=t},setTexturePath:function(t){this.texturePath=t},setBaseUrl:function(t){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t)},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var a=t.split("\n"),r={},e=/\s+/,i={},n=0;n<a.length;n++){var o=a[n];if(o=o.trim(),0!==o.length&&"#"!==o.charAt(0)){var h=o.indexOf(" "),p=h>=0?o.substring(0,h):o;p=p.toLowerCase();var l=h>=0?o.substring(h+1):"";if(l=l.trim(),"newmtl"===p)r={name:l},i[l]=r;else if(r)if("ka"===p||"kd"===p||"ks"===p){var u=l.split(e,3);r[p]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else r[p]=l}}var c=new s.MaterialCreator(this.texturePath||this.path,this.materialOptions);return c.setCrossOrigin(this.crossOrigin),c.setManager(this.manager),c.setMaterials(i),c}}),s.MaterialCreator=function(t,a){this.baseUrl=t||"",this.options=a,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:e.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:e.RepeatWrapping},s.MaterialCreator.prototype={constructor:s.MaterialCreator,setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var a={};for(var r in t){var e=t[r],s={};a[r]=s;for(var i in e){var n=!0,o=e[i],h=i.toLowerCase();switch(h){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(o=[o[0]/255,o[1]/255,o[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===o[0]&&0===o[1]&&0===o[1]&&(n=!1)}n&&(s[h]=o)}}return a},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var a in this.materialsInfo)this.materialsArray[t]=this.create(a),this.nameLookup[a]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var a=this.materialsInfo[t],r={name:t,side:this.side},s=function(t,a){return"string"!=typeof a||""===a?"":/^https?:\/\//i.test(a)?a:t+a};for(var i in a){var n=a[i];if(""!==n)switch(i.toLowerCase()){case"kd":r.color=(new e.Color).fromArray(n);break;case"ks":r.specular=(new e.Color).fromArray(n);break;case"map_kd":if(r.map)break;r.map=this.loadTexture(s(this.baseUrl,n)),r.map.wrapS=this.wrap,r.map.wrapT=this.wrap;break;case"ns":r.shininess=parseFloat(n);break;case"d":1>n&&(r.opacity=n,r.transparent=!0);break;case"Tr":n>0&&(r.opacity=1-n,r.transparent=!0);break;case"map_bump":case"bump":if(r.bumpMap)break;r.bumpMap=this.loadTexture(s(this.baseUrl,n)),r.bumpMap.wrapS=this.wrap,r.bumpMap.wrapT=this.wrap}}return this.materials[t]=new e.MeshPhongMaterial(r),this.materials[t]},loadTexture:function(t,a,r,s,i){var n,o=e.Loader.Handlers.get(t),h=void 0!==this.manager?this.manager:e.DefaultLoadingManager;return null===o&&(o=new e.TextureLoader(h)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),n=o.load(t,r,s,i),void 0!==a&&(n.mapping=a),n}},s});